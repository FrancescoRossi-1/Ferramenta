<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:body>

	<div class="indirizziSpedizione">


		<h3>Indirizzo Di Spedizione</h3>

		<p:accordionPanel id="accorditionIndirizziSpedizione"
			rendered="#{indirizziDiSpedizioneBean.indirizzoDiSpedizioneSelezionato.id == null}" activeIndex="null">

			<p:tab title="Seleziona un'indirizzo" id="tabIndirizziSpedizione"
				rendered="#{indirizziDiSpedizioneBean.indirizziSpedizioneUtente != null}">
				<p:outputPanel>
					<p>Seleziona un indirizzo di spedizione</p>

					<p:dataScroller value="#{indirizziDiSpedizioneBean.indirizziMap}"
						var="item" chunkSize="10" id="scrollerIndirizziSpedizione">
						<f:facet name="header">
          					  Indirizzi di spedizione collegati
        				</f:facet>
						<h:panelGrid columns="2" style="width:100%"
							columnClasses="logo,detail">

							<p:outputPanel id="panelIndirizziSpedizione">
								<h:panelGrid columns="12" cellpadding="7">
									<h:outputText value="Via:" />
									<h:outputText value="#{item.key.via}" style="font-weight: bold" />

									<h:outputText value="Numero civico:" />
									<h:outputText value="#{item.key.n_civico}"
										style="font-weight: bold" />

									<h:outputText value="CAP:" />
									<h:outputText value="#{item.key.cap}" style="font-weight: bold" />

									<h:outputText value="SCALA:"
										rendered="#{item.value.scala.length() > 0}" />
									<h:outputText value="#{item.value.scala}"
										style="font-weight: bold"
										rendered="#{item.value.scala.length() > 0}" />

									<h:outputText value="Interno:" />
									<h:outputText value="#{item.value.interno}"
										style="font-weight: bold" />

									<p:commandButton value="Seleziona"
										actionListener="#{indirizziDiSpedizioneBean.setIndirizzoDiSpedizioneSelezionato(item.key,item.value)}"
										ajax="false" />

									<p:commandButton value="Elimina"
										actionListener="#{indirizziDiSpedizioneBean.deleteIndirizzoDiSpedizione(item.value)}"
										ajax="false" />

								</h:panelGrid>

							</p:outputPanel>
						</h:panelGrid>
					</p:dataScroller>
				</p:outputPanel>

			</p:tab>
			<p:tab title="Aggiungi un indirizzo">
				<p>Inserisci un nuovo indirizzo di spedizione</p>
				<p:panelGrid id="gridIndirizzoDiSpedizione">
					<p:row>
						<p:column>
							<p:outputLabel for="provinciaIndirizzoSpedizione"
								value="Provincia" />
						</p:column>
						<p:column>
							<p:selectOneMenu id="provinciaIndirizzoSpedizione"
								value="#{provinceBean.idProvinciaSelezionata}">
								<f:selectItem itemLabel="Seleziona una scelta"
									itemValue="#{null}" />
								<f:selectItems value="#{provinceBean.allProvince}" var="item"
									itemLabel="#{item.nome_province}"
									itemValue="#{item.id_province}" />
							</p:selectOneMenu>
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<p:outputLabel for="viaIndirizzoSpedizione" value="Via" />
						</p:column>
						<p:column>
							<p:inputText id="viaIndirizzoSpedizione"
								value="#{indirizziBean.addIndirizzo.via}" />
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<p:outputLabel for="nCivicoIndirizzoSpedizione"
								value="Numero Civico" />
						</p:column>
						<p:column>
							<p:inputText id="nCivicoIndirizzoSpedizione"
								value="#{indirizziBean.addIndirizzo.n_civico}" />
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<p:outputLabel for="capIndirizzoSpedizione" value="CAP" />
						</p:column>
						<p:column>
							<p:inputText id="capIndirizzoSpedizione"
								value="#{indirizziBean.addIndirizzo.cap}" />
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<p:outputLabel for="scalaIndirizzoSpedizione" value="Scala" />
						</p:column>
						<p:column>
							<p:inputText id="scalaIndirizzoSpedizione"
								value="#{indirizziDiSpedizioneBean.addIndirizzoDiSpedizione.scala}" />
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<p:outputLabel for="internoIndirizzoSpedizione" value="Interno" />
						</p:column>
						<p:column>
							<p:inputText id="internoIndirizzoSpedizione"
								value="#{indirizziDiSpedizioneBean.addIndirizzoDiSpedizione.interno}" />
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<p:commandButton id="insertIndirizzoSpedizione"
								value="Aggiungi Indirizzo"
								actionListener="#{indirizziDiSpedizioneBean.insertIndirizzoDiSpedizione}"
								ajax="false" update="@all" />
						</p:column>
					</p:row>
				</p:panelGrid>
			</p:tab>

		</p:accordionPanel>


		<p:dataTable var="item"
			rendered="#{indirizziDiSpedizioneBean.indirizzoDiSpedizioneSelezionato.id != null}"
			value="#{indirizziDiSpedizioneBean.indirizzoDiSpedizioneSelezionato}">
			<p:column headerText="Via">
				<h:outputText value="#{item.indirizzoDiRiferimento.via}" />
			</p:column>

			<p:column headerText="Numero Civico">
				<h:outputText value="#{item.indirizzoDiRiferimento.n_civico}" />
			</p:column>

			<p:column headerText="CAP">
				<h:outputText value="#{item.indirizzoDiRiferimento.cap}" />
			</p:column>

			<p:column headerText="Scala">
				<h:outputText value="#{item.scala}"
					rendered="#{item.scala.length() != 0}" />
				<h:outputText value="n/d" rendered="#{item.scala.length() == 0}" />
			</p:column>

			<p:column headerText="Interno">
				<h:outputText value="#{item.interno}" />
			</p:column>

			<p:column headerText="Azioni">
				<p:commandButton value="Cambia Indirizzo" style="margin-top: 10px;"
					action="#{indirizziDiSpedizioneBean.setIndirizzoDiSpedizioneSelezionato(null,null)}"
					ajax="false"
					update="menuForm:tabView:accorditionIndirizziSpedizione:scrollerIndirizziSpedizione" />
			</p:column>
		</p:dataTable>



	</div>


</h:body>

</html>